@model IEnumerable<Store.ViewModels.PhoneViewModel>

@{
    ViewData["Title"] = "Phones";
}

<style>
    a{
        color: #6C757D;
        text-decoration: none;
    }
    a:hover{
        color: #007BFF;
    }
    
    .color-circle{
        width: 22px; 
        height: 22px;
        border-radius: 50%;
        border-width: 0.5px;
        border-style: solid;
        border-color: #a6a6a6;
        transition: 0.6s;
    }
    .color-circle:hover{
        border-color: #007BFF;
        border-width: 2px;
    }

</style>

<h3>Phones</h3>

<div class="d-flex flex-wrap">
    @foreach (var p in Model)
    {
        
        <div style="min-width: 200px; max-width: 220px; width: 100%" 
        class="bg-white m-1 p-3 d-flex flex-column justify-content-between">

            <div class="mw-100 m-3 d-flex justify-content-around">
                <a asp-action="Details" asp-route-id="@p.Id">
                    <img class="mw-100" style="max-height: 160px" 
                    src="data:image/jpg;base64,@Convert.ToBase64String(p.Image)"/>
                </a>
            </div>

            <div class="d-flex flex-wrap mb-3 mx-auto">
                @foreach (var c in from m in Model 
                                    orderby m.Color
                                   where m.Memory == p.Memory && m.Make == p.Make && m.Model == p.Model 
                                   select m)
                    {
                        if (c.Id == p.Id)
                        {
                            <a asp-action="Details" asp-route-id="@c.Id" title="@c.Color">
                                <div class="d-flex flex-column align-items-center mx-1">
                                        <div class="color-circle" 
                                        style="background:#@c.ColorHex; border-color: #007BFF; border-width: 1.5px"></div>
                                </div>
                            </a>
                        } 
                        else
                        {
                            <a asp-action="Details" asp-route-id="@c.Id" title="@c.Color">
                                <div class="d-flex flex-column align-items-center mx-1">
                                    <div class="color-circle" style="background:#@c.ColorHex;"></div>
                                </div>
                            </a>
                        }
                    }
            </div>

            <a asp-action="Details" asp-route-id="@p.Id">
                <h6 class="fw-normal" style="font-size: 14px">@p.GetFullName()</h6>
            </a>

            <div class="d-flex flex-row justify-content-between align-items-center mt-2">
                <h6 class="m-0 text-primary fw-bold">$@p.Price</h6>
                <input type="button" value="More" class="btn btn-outline-primary mr-2"
                                onclick="location.href='@Url.Action("Details", "Phones", new {id = p.Id})'"/>
            </div>
        </div>
    }
    
</div>


